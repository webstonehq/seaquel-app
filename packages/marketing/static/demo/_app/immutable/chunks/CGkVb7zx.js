var g=Object.defineProperty;var u=r=>{throw TypeError(r)};var y=(r,t,e)=>t in r?g(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var l=(r,t,e)=>y(r,typeof t!="symbol"?t+"":t,e),w=(r,t,e)=>t.has(r)||u("Cannot "+e);var i=(r,t,e)=>(w(r,t,"read from private field"),e?e.call(r):t.get(r)),f=(r,t,e)=>t.has(r)?u("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e);import{k as S,l as b,h as H,g as K,e as k}from"./Ng8P2r2G.js";import{s as C}from"./nm-eUgNh.js";import{i as x}from"./Dc67WuTr.js";let c=null;function E(){if(x())try{if(typeof navigator<"u"){const r=navigator.userAgent.toLowerCase();if(r.includes("mac"))return"macos";if(r.includes("win"))return"windows";if(r.includes("linux"))return"linux"}}catch{}return"unknown"}function d(){return c===null&&(c=E()),c==="macos"}const h={mac:{mod:"⌘",ctrl:"⌃",alt:"⌥",shift:"⇧",enter:"↵",backspace:"⌫",delete:"⌦",escape:"⎋",tab:"⇥",up:"↑",down:"↓",left:"←",right:"→"},other:{mod:"Ctrl",ctrl:"Ctrl",alt:"Alt",shift:"Shift",enter:"Enter",backspace:"Backspace",delete:"Delete",escape:"Esc",tab:"Tab",up:"↑",down:"↓",left:"←",right:"→"}};function P(){return d()?h.mac:h.other}var n;class T{constructor(){l(this,"handlers",new Map);f(this,n,H(!1));l(this,"handleKeydown",t=>{const e=t.target,o=e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e.isContentEditable;if(!o&&t.key==="?"&&!t.metaKey&&!t.ctrlKey&&!t.altKey){t.preventDefault(),this.showHelp=!0;return}for(const s of C)if(!s.handledExternally&&this.matchesShortcut(t,s.keys)){if(o&&!this.isGlobalShortcut(s))continue;const a=this.handlers.get(s.id);if(a){t.preventDefault(),a();return}}})}get showHelp(){return K(i(this,n))}set showHelp(t){k(i(this,n),t,!0)}registerHandler(t,e){this.handlers.set(t,e)}unregisterHandler(t){this.handlers.delete(t)}matchesShortcut(t,e){const s=d()?t.metaKey:t.ctrlKey;if(e.mod&&!s||!e.mod&&s||e.ctrl&&!t.ctrlKey||e.alt&&!t.altKey||e.shift!==void 0&&e.shift!==t.shiftKey)return!1;const a=t.key.toLowerCase(),p=e.key.toLowerCase();return a===p||e.key==="]"&&(t.key==="]"||t.key==="}")||e.key==="["&&(t.key==="["||t.key==="{")}isGlobalShortcut(t){return["toggleSidebar","showShortcuts","commandPalette","saveQuery","formatSql","openSettings"].includes(t.id)}toggleHelp(){this.showHelp=!this.showHelp}closeHelp(){this.showHelp=!1}}n=new WeakMap;const m=Symbol("shortcuts");function A(){return S(m,new T)}function D(){return b(m)}export{P as g,d as i,A as s,D as u};
