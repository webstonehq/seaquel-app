var l=Object.defineProperty;var s=(a,e,t)=>e in a?l(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var c=(a,e,t)=>s(a,typeof e!="symbol"?e+"":e,t);class i{constructor(e,t){c(this,"prefix");c(this,"cache");if(this.prefix=`seaquel_${e.replace(".json","")}_`,this.cache=new Map,this.loadFromLocalStorage(),t)for(const[r,o]of Object.entries(t))this.cache.has(r)||this.cache.set(r,o)}loadFromLocalStorage(){try{for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);if(t&&t.startsWith(this.prefix)){const r=t.slice(this.prefix.length),o=localStorage.getItem(t);if(o!==null)try{this.cache.set(r,JSON.parse(o))}catch{this.cache.set(r,o)}}}}catch(e){console.error("Failed to load from localStorage:",e)}}async get(e){const t=this.cache.get(e);return t!==void 0?t:null}async set(e,t){this.cache.set(e,t);try{localStorage.setItem(this.prefix+e,JSON.stringify(t))}catch(r){console.error("Failed to save to localStorage:",r)}}async save(){try{for(const[e,t]of this.cache.entries())localStorage.setItem(this.prefix+e,JSON.stringify(t))}catch(e){console.error("Failed to save to localStorage:",e)}}async clear(){try{const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);r&&r.startsWith(this.prefix)&&e.push(r)}for(const t of e)localStorage.removeItem(t);this.cache.clear()}catch(e){console.error("Failed to clear localStorage:",e)}}async delete(){await this.clear()}}class n{constructor(){c(this,"id","web")}isAvailable(){try{return typeof window<"u"&&typeof localStorage<"u"}catch{return!1}}async load(e,t){return new i(e,t==null?void 0:t.defaults)}}export{n as WebStorageProvider};
