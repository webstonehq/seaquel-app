const d=["en","es","ar","de","ko","fr"],b="PARAGLIDE_LOCALE";const y=["cookie","globalVariable","baseLocale"];globalThis.__paraglide={};let s,L=!1,g=()=>{let e;for(const t of y){if(t==="cookie")e=E();else if(t==="baseLocale")e="en";else if(t==="globalVariable"&&s!==void 0)e=s;else if(U(t)&&f.has(t)){const o=f.get(t);if(o){const n=o.getLocale();if(n instanceof Promise)continue;e=n}}if(e!==void 0){const o=x(e);return L||(s=o,L=!0,R(o,{reload:!1})),o}}throw new Error("No locale found. Read the docs https://inlang.com/m/gerre34r/library-inlang-paraglideJs/errors#no-locale-found")};const C=e=>{window.location.reload()};let R=(e,t)=>{const o={reload:!0,...t};let n;try{n=g()}catch{}const r=[];for(const l of y)if(l==="globalVariable")s=e;else if(l==="cookie"){if(typeof document>"u"||typeof window>"u")continue;const c=`${b}=${e}; path=/; max-age=34560000`;document.cookie=c}else{if(l==="baseLocale")continue;if(U(l)&&f.has(l)){const c=f.get(l);if(c){let i=c.setLocale(e);i instanceof Promise&&(i=i.catch(k=>{throw new Error(`Custom strategy "${l}" setLocale failed.`,{cause:k})}),r.push(i))}}}const a=()=>{o.reload&&window.location&&e!==n&&C()};if(r.length)return Promise.all(r).then(()=>{a()});a()},h=()=>typeof window<"u"?window.location.origin:"http://fallback.com";function u(e){return typeof e!="string"?!1:e?d.some(t=>t.toLowerCase()===e.toLowerCase()):!1}function x(e){if(typeof e!="string")throw new Error(`Invalid locale: ${e}. Expected a string.`);const t=e.toLowerCase(),o=d.find(n=>n.toLowerCase()===t);if(!o)throw new Error(`Invalid locale: ${e}. Expected one of: ${d.join(", ")}`);return o}function E(){if(typeof document>"u"||!document.cookie)return;const e=document.cookie.match(new RegExp(`(^| )${b}=([^;]+)`)),t=e==null?void 0:e[2];if(u(t))return t}let m,w;function z(e){const t=typeof e=="string"?e:e.href;if(m===t)return w;let o;return o=S(e),m=t,w=o,o}function S(e){const o=new URL(e,"http://dummy.com").pathname.split("/").filter(Boolean);if(o.length>0){const n=o[0];if(u(n))return n}return"en"}function p(e,t){return $(e,t)}function $(e,t){const o=typeof e=="string"?new URL(e,h()):new URL(e),n=(t==null?void 0:t.locale)??g();if(z(o)===n)return o;const a=o.pathname.split("/").filter(Boolean);return a.length>0&&u(a[0])&&a.shift(),n==="en"?o.pathname="/"+a.join("/"):o.pathname="/"+n+"/"+a.join("/"),o}function P(e){return j(e)}function j(e){const t=typeof e=="string"?new URL(e,h()):new URL(e),o=t.pathname.split("/").filter(Boolean);return o.length>0&&u(o[0])&&(t.pathname="/"+o.slice(1).join("/")),t}function O(e,t){const o=g(),n=(t==null?void 0:t.locale)??o,r=new URL(e,h()),a=p(r,{locale:n});return e.startsWith("/")&&r.origin===a.origin?n!==o&&p(r,{locale:o}).origin!==a.origin?a.href:a.pathname+a.search+a.hash:a.href}const f=new Map;function U(e){return typeof e=="string"&&/^custom-[A-Za-z0-9_-]+$/.test(e)}export{O as a,P as d,g,d as l,R as s};
