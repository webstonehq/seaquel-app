import{a as nt,t as A,g as ot,c as it,P as dt,b as ct,C as Ie,d as vt}from"../chunks/z4UoWtl9.js";import"../chunks/Bzak7iHL.js";import{p as ft,u as ut,g as e,i as p,h as Z,e as x,f,a as gt,s as o,c as l,r as s,n as G,t as D}from"../chunks/Ng8P2r2G.js";import{s as L}from"../chunks/Dv8uDT6C.js";import{d as mt,f as d,a as n,c as ee,t as Be}from"../chunks/CfSXt8bd.js";import{i as J}from"../chunks/Du1jPCW4.js";import{B as W,e as Qe}from"../chunks/CWJNqUGE.js";import{c as _t,b as ht,d as pt}from"../chunks/Dc67WuTr.js";import{b as xt}from"../chunks/DLIyy6hA.js";import{p as $t}from"../chunks/_n9rJkbU.js";import{g as he}from"../chunks/C8XiI2MD.js";import{S as bt,a as Ct}from"../chunks/CX7Y9Z70.js";import"../chunks/nm-eUgNh.js";import{s as zt,Q as St,R as je,a as kt,P as Te,T as Pt,b as yt}from"../chunks/CaPoShmF.js";import"../chunks/CluvpHAZ.js";import"../chunks/bqbZ1eZW.js";import{W as Lt,C as wt}from"../chunks/DPW2dv9l.js";import{A as Rt,a as It}from"../chunks/CXHLXAX3.js";function Bt(){return Object.keys(nt).map(te=>({lessonId:te}))}const fa=Object.freeze(Object.defineProperty({__proto__:null,entries:Bt},Symbol.toStringTag,{value:"Module"}));var Qt=d("<!> Reset",1),jt=d("<!> Running...",1),Tt=d("<!> Run Query",1),Nt=d('<div class="h-full overflow-hidden"><!></div>'),qt=d('<button type="button"></button>'),Et=d('<div class="flex items-center gap-2 text-sm"><!> <span> </span></div>'),Ot=d("Next Lesson <!>",1),At=d("<!> Restart Lesson",1),Gt=d('<div class="space-y-4"><div class="flex items-center gap-2 p-2 bg-green-500/10 rounded-md"><!> <span class="text-sm font-medium text-green-700 dark:text-green-400">Lesson Complete!</span></div> <div class="flex items-center justify-between"><div class="flex items-center gap-1.5"></div> <span class="text-xs text-muted-foreground"> </span></div> <div><h3 class="font-medium"> </h3> <p class="text-sm text-muted-foreground mt-1"> </p></div> <div class="space-y-2"></div> <div class="flex flex-col gap-2 pt-2"><!> <!></div></div>'),Wt=d('<div class="p-3 h-full overflow-y-auto"><!></div>'),Ft=d("<!> <!> <!>",1),Ht=d('<div class="w-64 border-r h-full"><!></div>'),Mt=d('<div class="flex items-center justify-between px-4 py-2 border-b"><div class="flex items-center gap-3"><!> <div><h1 class="font-semibold"> </h1> <p class="text-xs text-muted-foreground"> </p></div></div> <div class="flex items-center gap-2"><!> <!></div></div> <!>',1),Vt=d('<div class="flex-1 flex items-center justify-center"><div class="text-center"><!> <h2 class="font-semibold mb-2">Lesson not found</h2> <p class="text-sm text-muted-foreground mb-4"> </p> <!></div></div>'),Dt=d("<!> <!>",1);function ua(te,Ne){ft(Ne,!0);const m=zt(new St),v=p(()=>$t.params.lessonId??""),a=p(()=>e(v)?ot(e(v)):void 0);let i=Z(0);const ae=p(()=>A.getCompletedChallenges(e(v))),$=p(()=>{var t;return(t=e(a))==null?void 0:t.challenges[e(i)]}),qe=p(()=>e(a)?e(ae).size===e(a).challenges.length:!1),se=p(()=>vt(e(v)));let pe=Z(null);ut(()=>{var t,r;if(A.isInitialized&&e(a)&&e(a).challenges.length>0&&e(pe)!==e(v)){const _=e(a).challenges[0],z=A.getChallengeState(e(v),_.id);z?m.fromSerializable(z):m.reset(),(r=(t=e(C))==null?void 0:t.reset)==null||r.call(t),x(pe,e(v),!0),x(i,0)}});let C=Z(void 0),re=Z(!1);const Ee=p(()=>m.customSql??m.generatedSql),Oe=p(()=>e(Ee).trim().length>0&&!e(re));function Ae(t){x(re,t,!0)}function K(t){var _,z;const r=A.getChallengeState(e(v),t);r?m.fromSerializable(r):m.reset(),(z=(_=e(C))==null?void 0:_.reset)==null||z.call(_)}function Ge(){if(e($)&&e(v)){const t=m.toSerializable();A.completeChallenge(e(v),e($).id,t)}if(e(a)&&e(i)<e(a).challenges.length-1){const t=e(i)+1,r=e(a).challenges[t];x(i,t),K(r.id)}else be()}function We(){if(e(a)&&e(i)>0){const t=e(i)-1,r=e(a).challenges[t];x(i,t),K(r.id)}}function xe(t){if(e(a)&&t>=0&&t<e(a).challenges.length){const r=e(a).challenges[t];x(i,t,!0),K(r.id)}}function Fe(){if(e(a)&&e(i)<e(a).challenges.length-1){const t=e(i)+1,r=e(a).challenges[t];x(i,t),K(r.id)}}function He(){var t,r;m.reset(),(r=(t=e(C))==null?void 0:t.reset)==null||r.call(t)}function Me(){var t,r;(r=(t=e(C))==null?void 0:t.runQuery)==null||r.call(t)}function $e(){he("/learn")}function be(){e(se)?he(`/learn/${e(se)}`):he("/learn")}function Ve(){var t,r;A.resetLesson(e(v)),m.reset(),(r=(t=e(C))==null?void 0:t.reset)==null||r.call(t),x(i,0)}var Ce=Dt(),ze=f(Ce);bt(ze,{});var De=o(ze,2);Ct(De,{class:"flex flex-col h-full overflow-hidden",children:(t,r)=>{var _=ee(),z=f(_);{var Je=w=>{var R=Mt(),I=f(R),B=l(I),Q=l(B);W(Q,{variant:"ghost",size:"icon-sm",onclick:$e,children:(j,S)=>{Rt(j,{class:"size-4"})},$$slots:{default:!0}});var U=o(Q,2),F=l(U),le=l(F,!0);s(F);var ne=o(F,2),oe=l(ne);s(ne),s(U),s(B);var Se=o(B,2),ke=l(Se);W(ke,{variant:"outline",size:"sm",onclick:He,children:(j,S)=>{var k=Qt(),T=f(k);je(T,{class:"size-4 mr-2"}),G(),n(j,k)},$$slots:{default:!0}});var Ue=o(ke,2);{let j=p(()=>!e(Oe));W(Ue,{size:"sm",get disabled(){return e(j)},onclick:Me,children:(S,k)=>{var T=ee(),ie=f(T);{var Pe=h=>{var b=jt(),H=f(b);it(H,{class:"size-4 mr-2 animate-spin"}),G(),n(h,b)},X=h=>{var b=Tt(),H=f(b);dt(H,{class:"size-4 mr-2"}),G(),n(h,b)};J(ie,h=>{e(re)?h(Pe):h(X,!1)})}n(S,T)},$$slots:{default:!0}})}s(Se),s(I);var Xe=o(I,2);xt(Lt(Xe,{onExecutingChange:Ae,leftPanel:S=>{var k=Ht(),T=l(k);kt(T,{direction:"vertical",class:"h-full",children:(ie,Pe)=>{var X=Ft(),h=f(X);Te(h,{defaultSize:40,minSize:15,children:(de,Ye)=>{var P=Nt(),ce=l(P);Pt(ce,{}),s(P),n(de,P)},$$slots:{default:!0}});var b=o(h,2);yt(b,{withHandle:!0});var H=o(b,2);Te(H,{defaultSize:60,minSize:20,children:(de,Ye)=>{var P=Wt(),ce=l(P);{var Ze=N=>{var q=Gt(),M=l(q),ve=l(M);Ie(ve,{class:"size-5 text-green-500 shrink-0"}),G(2),s(M);var y=o(M,2),fe=l(y);Qe(fe,23,()=>e(a).challenges,u=>u.id,(u,V,c)=>{var g=qt();g.__click=()=>xe(e(c)),D(E=>{ht(g,1,E),pt(g,"title",`Challenge ${e(c)+1}`)},[()=>_t(["size-2.5 rounded-full transition-colors",e(c)===e(i)?"bg-primary ring-2 ring-primary/30":e(ae).has(e(V).id)?"bg-green-500 hover:bg-green-400":"bg-muted-foreground/30 hover:bg-muted-foreground/50"])]),n(u,g)}),s(fe);var ye=o(fe,2),tt=l(ye);s(ye),s(y);var ue=o(y,2),ge=l(ue),at=l(ge,!0);s(ge);var Le=o(ge,2),st=l(Le,!0);s(Le),s(ue);var me=o(ue,2);Qe(me,21,()=>e($).criteria,u=>u.id,(u,V)=>{var c=Et(),g=l(c);Ie(g,{class:"size-4 text-green-500 shrink-0"});var E=o(g,2),_e=l(E,!0);s(E),s(c),D(()=>L(_e,e(V).description)),n(u,c)}),s(me);var we=o(me,2),Re=l(we);W(Re,{onclick:be,children:(u,V)=>{var c=ee(),g=f(c);{var E=O=>{var Y=Ot(),lt=o(f(Y));It(lt,{class:"size-4 ml-2"}),n(O,Y)},_e=O=>{var Y=Be("Back to Lessons");n(O,Y)};J(g,O=>{e(se)?O(E):O(_e,!1)})}n(u,c)},$$slots:{default:!0}});var rt=o(Re,2);W(rt,{variant:"outline",size:"sm",onclick:Ve,children:(u,V)=>{var c=At(),g=f(c);je(g,{class:"size-4 mr-2"}),G(),n(u,c)},$$slots:{default:!0}}),s(we),s(q),D(()=>{L(tt,`${e(i)+1} / ${e(a).challenges.length??""}`),L(at,e($).title),L(st,e($).description)}),n(N,q)},et=N=>{var q=ee(),M=f(q);{var ve=y=>{wt(y,{get challenge(){return e($)},get challengeIndex(){return e(i)},get totalChallenges(){return e(a).challenges.length},onComplete:Ge,onSkip:Fe,onPrevious:We,onGoTo:xe,get completedChallenges(){return e(ae)},get allChallenges(){return e(a).challenges}})};J(M,y=>{e($)&&y(ve)},!0)}n(N,q)};J(ce,N=>{e(qe)&&e($)?N(Ze):N(et,!1)})}s(P),n(de,P)},$$slots:{default:!0}}),n(ie,X)},$$slots:{default:!0}}),s(k),n(S,k)},$$slots:{leftPanel:!0}}),S=>x(C,S,!0),()=>e(C)),D(()=>{L(le,e(a).title),L(oe,`Challenge ${e(i)+1} of ${e(a).challenges.length??""}`)}),n(w,R)},Ke=w=>{var R=Vt(),I=l(R),B=l(I);ct(B,{class:"size-12 mx-auto mb-4 text-muted-foreground"});var Q=o(B,4),U=l(Q);s(Q);var F=o(Q,2);W(F,{onclick:$e,children:(le,ne)=>{G();var oe=Be("Back to Lessons");n(le,oe)},$$slots:{default:!0}}),s(I),s(R),D(()=>L(U,`The lesson "${e(v)??""}" doesn't exist.`)),n(w,R)};J(z,w=>{e(a)?w(Je):w(Ke,!1)})}n(t,_)},$$slots:{default:!0}}),n(te,Ce),gt()}mt(["click"]);export{ua as component,fa as universal};
