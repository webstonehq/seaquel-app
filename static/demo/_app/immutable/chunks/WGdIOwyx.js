var g=Object.defineProperty;var c=r=>{throw TypeError(r)};var w=(r,t,e)=>t in r?g(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var i=(r,t,e)=>w(r,typeof t!="symbol"?t+"":t,e),y=(r,t,e)=>t.has(r)||c("Cannot "+e);var l=(r,t,e)=>(y(r,t,"read from private field"),e?e.call(r):t.get(r)),f=(r,t,e)=>t.has(r)?c("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e);import{k as S,l as b,h as H,g as K,i as x}from"./BxxYrwFR.js";import{s as C}from"./FiK77Txc.js";import{i as k}from"./WuvbgBPC.js";let u=null;function v(){if(k())try{if(typeof navigator<"u"){const r=navigator.userAgent.toLowerCase();if(r.includes("mac"))return"macos";if(r.includes("win"))return"windows";if(r.includes("linux"))return"linux"}}catch{}if(typeof navigator<"u"){const r=navigator.userAgent.toLowerCase();if(r.includes("mac"))return"macos";if(r.includes("win"))return"windows";if(r.includes("linux"))return"linux"}return"unknown"}function d(){return u===null&&(u=v()),u==="macos"}const h={mac:{mod:"⌘",ctrl:"⌃",alt:"⌥",shift:"⇧",enter:"↵",backspace:"⌫",delete:"⌦",escape:"⎋",tab:"⇥",up:"↑",down:"↓",left:"←",right:"→"},other:{mod:"Ctrl",ctrl:"Ctrl",alt:"Alt",shift:"Shift",enter:"Enter",backspace:"Backspace",delete:"Delete",escape:"Esc",tab:"Tab",up:"↑",down:"↓",left:"←",right:"→"}};function A(){return d()?h.mac:h.other}var s;class E{constructor(){i(this,"handlers",new Map);f(this,s,H(!1));i(this,"handleKeydown",t=>{const e=t.target,o=e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e.isContentEditable;if(!o&&t.key==="?"&&!t.metaKey&&!t.ctrlKey&&!t.altKey){t.preventDefault(),this.showHelp=!0;return}for(const n of C)if(!n.handledExternally&&this.matchesShortcut(t,n.keys)){if(o&&!this.isGlobalShortcut(n))continue;const a=this.handlers.get(n.id);if(a){t.preventDefault(),a();return}}})}get showHelp(){return K(l(this,s))}set showHelp(t){x(l(this,s),t,!0)}registerHandler(t,e){this.handlers.set(t,e)}unregisterHandler(t){this.handlers.delete(t)}matchesShortcut(t,e){const n=d()?t.metaKey:t.ctrlKey;if(e.mod&&!n||!e.mod&&n||e.ctrl&&!t.ctrlKey||e.alt&&!t.altKey||e.shift!==void 0&&e.shift!==t.shiftKey)return!1;const a=t.key.toLowerCase(),p=e.key.toLowerCase();return a===p||e.key==="]"&&(t.key==="]"||t.key==="}")||e.key==="["&&(t.key==="["||t.key==="{")}isGlobalShortcut(t){return["toggleSidebar","showShortcuts","commandPalette","saveQuery","formatSql","openSettings"].includes(t.id)}toggleHelp(){this.showHelp=!this.showHelp}closeHelp(){this.showHelp=!1}}s=new WeakMap;const m=Symbol("shortcuts");function P(){return S(m,new E)}function D(){return b(m)}export{A as g,d as i,P as s,D as u};
