import{a as st,t as G,g as rt,b as lt,P as nt,B as ot,C as Ie,c as it}from"../chunks/DvNzxRcs.js";import"../chunks/Bzak7iHL.js";import{p as dt,u as ct,g as e,b as $,e as _e,h as b,f,a as vt,s as o,c as l,r,n as W,t as J}from"../chunks/RtNAYh7v.js";import{s as L}from"../chunks/vJbyZA0Y.js";import{d as ft,f as d,a as n,c as Z,t as Be}from"../chunks/G68d9aZ3.js";import{i as K}from"../chunks/Cezg9DFx.js";import{B as q,e as Qe}from"../chunks/BBgqcc6q.js";import{c as ut,b as gt,d as _t}from"../chunks/CDLKInbX.js";import{b as mt}from"../chunks/CifI9K24.js";import{p as ht}from"../chunks/CqbquO6G.js";import{g as me}from"../chunks/DqjW4Gs4.js";import{S as pt,a as xt}from"../chunks/DCBgXRLh.js";import{s as $t,Q as bt,R as je,a as Ct,P as Te,T as zt,b as St}from"../chunks/ZJ4Bl5jA.js";import"../chunks/BQlQxc_j.js";import{W as kt,C as yt}from"../chunks/CLsaMu1J.js";import{A as Pt,a as Lt}from"../chunks/CB6V4cyg.js";function wt(){return Object.keys(st).map(ee=>({lessonId:ee}))}const oa=Object.freeze(Object.defineProperty({__proto__:null,entries:wt},Symbol.toStringTag,{value:"Module"}));var Rt=d("<!> Reset",1),It=d("<!> Running...",1),Bt=d("<!> Run Query",1),Qt=d('<div class="h-full overflow-hidden"><!></div>'),jt=d('<button type="button"></button>'),Tt=d('<div class="flex items-center gap-2 text-sm"><!> <span> </span></div>'),Nt=d("Next Lesson <!>",1),Ot=d("<!> Restart Lesson",1),At=d('<div class="space-y-4"><div class="flex items-center gap-2 p-2 bg-green-500/10 rounded-md"><!> <span class="text-sm font-medium text-green-700 dark:text-green-400">Lesson Complete!</span></div> <div class="flex items-center justify-between"><div class="flex items-center gap-1.5"></div> <span class="text-xs text-muted-foreground"> </span></div> <div><h3 class="font-medium"> </h3> <p class="text-sm text-muted-foreground mt-1"> </p></div> <div class="space-y-2"></div> <div class="flex flex-col gap-2 pt-2"><!> <!></div></div>'),Et=d('<div class="p-3 h-full overflow-y-auto"><!></div>'),Gt=d("<!> <!> <!>",1),Wt=d('<div class="w-64 border-r h-full"><!></div>'),qt=d('<div class="flex items-center justify-between px-4 py-2 border-b"><div class="flex items-center gap-3"><!> <div><h1 class="font-semibold"> </h1> <p class="text-xs text-muted-foreground"> </p></div></div> <div class="flex items-center gap-2"><!> <!></div></div> <!>',1),Ft=d('<div class="flex-1 flex items-center justify-center"><div class="text-center"><!> <h2 class="font-semibold mb-2">Lesson not found</h2> <p class="text-sm text-muted-foreground mb-4"> </p> <!></div></div>'),Ht=d("<!> <!>",1);function ia(ee,Ne){dt(Ne,!0);const C=$t(new bt),v=$(()=>ht.params.lessonId??""),s=$(()=>e(v)?rt(e(v)):void 0);let i=_e(0);const te=$(()=>G.getCompletedChallenges(e(v))),h=$(()=>{var t;return(t=e(s))==null?void 0:t.challenges[e(i)]}),Oe=$(()=>e(s)?e(te).size===e(s).challenges.length:!1),ae=$(()=>it(e(v)));let he=_e(null);ct(()=>{var t,a;if(G.isInitialized&&e(s)&&e(s).challenges.length>0&&e(he)!==e(v)){const _=e(s).challenges[0],z=G.getChallengeState(e(v),_.id);z?C.fromSerializable(z):C.reset(),(a=(t=e(p))==null?void 0:t.reset)==null||a.call(t),b(he,e(v),!0),b(i,0)}});let p=_e(void 0);const pe=$(()=>{var t,a;return((a=(t=e(p))==null?void 0:t.getState)==null?void 0:a.call(t))??{canRunQuery:!1,isExecuting:!1}});function U(t){var _,z;const a=G.getChallengeState(e(v),t);a?C.fromSerializable(a):C.reset(),(z=(_=e(p))==null?void 0:_.reset)==null||z.call(_)}function Ae(){if(e(h)&&e(v)){const t=C.toSerializable();G.completeChallenge(e(v),e(h).id,t)}if(e(s)&&e(i)<e(s).challenges.length-1){const t=e(i)+1,a=e(s).challenges[t];b(i,t),U(a.id)}else be()}function Ee(){if(e(s)&&e(i)>0){const t=e(i)-1,a=e(s).challenges[t];b(i,t),U(a.id)}}function xe(t){if(e(s)&&t>=0&&t<e(s).challenges.length){const a=e(s).challenges[t];b(i,t,!0),U(a.id)}}function Ge(){if(e(s)&&e(i)<e(s).challenges.length-1){const t=e(i)+1,a=e(s).challenges[t];b(i,t),U(a.id)}}function We(){var t,a;C.reset(),(a=(t=e(p))==null?void 0:t.reset)==null||a.call(t)}function qe(){var t,a;(a=(t=e(p))==null?void 0:t.runQuery)==null||a.call(t)}function $e(){me("/learn")}function be(){e(ae)?me(`/learn/${e(ae)}`):me("/learn")}function Fe(){var t,a;G.resetLesson(e(v)),C.reset(),(a=(t=e(p))==null?void 0:t.reset)==null||a.call(t),b(i,0)}var Ce=Ht(),ze=f(Ce);pt(ze,{});var He=o(ze,2);xt(He,{class:"flex flex-col h-full overflow-hidden",children:(t,a)=>{var _=Z(),z=f(_);{var Me=w=>{var R=qt(),I=f(R),B=l(I),Q=l(B);q(Q,{variant:"ghost",size:"icon-sm",onclick:$e,children:(j,S)=>{Pt(j,{class:"size-4"})},$$slots:{default:!0}});var V=o(Q,2),F=l(V),se=l(F,!0);r(F);var re=o(F,2),le=l(re);r(re),r(V),r(B);var Se=o(B,2),ke=l(Se);q(ke,{variant:"outline",size:"sm",onclick:We,children:(j,S)=>{var k=Rt(),T=f(k);je(T,{class:"size-4 mr-2"}),W(),n(j,k)},$$slots:{default:!0}});var Je=o(ke,2);{let j=$(()=>!e(pe).canRunQuery);q(Je,{size:"sm",get disabled(){return e(j)},onclick:qe,children:(S,k)=>{var T=Z(),ne=f(T);{var ye=m=>{var x=It(),H=f(x);lt(H,{class:"size-4 mr-2 animate-spin"}),W(),n(m,x)},X=m=>{var x=Bt(),H=f(x);nt(H,{class:"size-4 mr-2"}),W(),n(m,x)};K(ne,m=>{e(pe).isExecuting?m(ye):m(X,!1)})}n(S,T)},$$slots:{default:!0}})}r(Se),r(I);var Ke=o(I,2);mt(kt(Ke,{leftPanel:S=>{var k=Wt(),T=l(k);Ct(T,{direction:"vertical",class:"h-full",children:(ne,ye)=>{var X=Gt(),m=f(X);Te(m,{defaultSize:40,minSize:15,children:(oe,Ue)=>{var y=Qt(),ie=l(y);zt(ie,{}),r(y),n(oe,y)},$$slots:{default:!0}});var x=o(m,2);St(x,{withHandle:!0});var H=o(x,2);Te(H,{defaultSize:60,minSize:20,children:(oe,Ue)=>{var y=Et(),ie=l(y);{var Ve=N=>{var O=At(),M=l(O),de=l(M);Ie(de,{class:"size-5 text-green-500 shrink-0"}),W(2),r(M);var P=o(M,2),ce=l(P);Qe(ce,23,()=>e(s).challenges,u=>u.id,(u,D,c)=>{var g=jt();g.__click=()=>xe(e(c)),J(A=>{gt(g,1,A),_t(g,"title",`Challenge ${e(c)+1}`)},[()=>ut(["size-2.5 rounded-full transition-colors",e(c)===e(i)?"bg-primary ring-2 ring-primary/30":e(te).has(e(D).id)?"bg-green-500 hover:bg-green-400":"bg-muted-foreground/30 hover:bg-muted-foreground/50"])]),n(u,g)}),r(ce);var Pe=o(ce,2),Ye=l(Pe);r(Pe),r(P);var ve=o(P,2),fe=l(ve),Ze=l(fe,!0);r(fe);var Le=o(fe,2),et=l(Le,!0);r(Le),r(ve);var ue=o(ve,2);Qe(ue,21,()=>e(h).criteria,u=>u.id,(u,D)=>{var c=Tt(),g=l(c);Ie(g,{class:"size-4 text-green-500 shrink-0"});var A=o(g,2),ge=l(A,!0);r(A),r(c),J(()=>L(ge,e(D).description)),n(u,c)}),r(ue);var we=o(ue,2),Re=l(we);q(Re,{onclick:be,children:(u,D)=>{var c=Z(),g=f(c);{var A=E=>{var Y=Nt(),at=o(f(Y));Lt(at,{class:"size-4 ml-2"}),n(E,Y)},ge=E=>{var Y=Be("Back to Lessons");n(E,Y)};K(g,E=>{e(ae)?E(A):E(ge,!1)})}n(u,c)},$$slots:{default:!0}});var tt=o(Re,2);q(tt,{variant:"outline",size:"sm",onclick:Fe,children:(u,D)=>{var c=Ot(),g=f(c);je(g,{class:"size-4 mr-2"}),W(),n(u,c)},$$slots:{default:!0}}),r(we),r(O),J(()=>{L(Ye,`${e(i)+1} / ${e(s).challenges.length??""}`),L(Ze,e(h).title),L(et,e(h).description)}),n(N,O)},Xe=N=>{var O=Z(),M=f(O);{var de=P=>{yt(P,{get challenge(){return e(h)},get challengeIndex(){return e(i)},get totalChallenges(){return e(s).challenges.length},onComplete:Ae,onSkip:Ge,onPrevious:Ee,onGoTo:xe,get completedChallenges(){return e(te)},get allChallenges(){return e(s).challenges}})};K(M,P=>{e(h)&&P(de)},!0)}n(N,O)};K(ie,N=>{e(Oe)&&e(h)?N(Ve):N(Xe,!1)})}r(y),n(oe,y)},$$slots:{default:!0}}),n(ne,X)},$$slots:{default:!0}}),r(k),n(S,k)},$$slots:{leftPanel:!0}}),S=>b(p,S,!0),()=>e(p)),J(()=>{L(se,e(s).title),L(le,`Challenge ${e(i)+1} of ${e(s).challenges.length??""}`)}),n(w,R)},De=w=>{var R=Ft(),I=l(R),B=l(I);ot(B,{class:"size-12 mx-auto mb-4 text-muted-foreground"});var Q=o(B,4),V=l(Q);r(Q);var F=o(Q,2);q(F,{onclick:$e,children:(se,re)=>{W();var le=Be("Back to Lessons");n(se,le)},$$slots:{default:!0}}),r(I),r(R),J(()=>L(V,`The lesson "${e(v)??""}" doesn't exist.`)),n(w,R)};K(z,w=>{e(s)?w(Me):w(De,!1)})}n(t,_)},$$slots:{default:!0}}),n(ee,Ce),vt()}ft(["click"]);export{ia as component,oa as universal};
